{"version":3,"file":"static/webpack/static/development/pages/shop.js.2dbcb4f7ebb243b848af.hot-update.js","sources":["webpack:///./pages/shop.js"],"sourcesContent":["import Header from '../components/Header';\nimport Head from 'next/head';\nimport ProductsTable from '../components/ProductsTable';\n\nimport fetch from 'isomorphic-unfetch'\n\nexport default class Shop extends React.Component {\n\n    constructor(){\n        super();\n    }\n\n    static async getInitialProps() {\n        const result = await fetch(\"http://localhost:4000/products\")\n        const data = await result.json()\n        return {\n            myData: data\n        }\n    }\n\n    componentWillMount(){\n        this.setState({\n            \"products\": this.props.myData,\n            \"count\": this.props.myData.length,\n            \"inputValue\": \"\"\n        });\n    }\n\n    addProduct(){\n        let data = this.state.products\n        let newProduct = {\n            \"id\": this.state.products.length+1,\n            \"name\": this.state.inputValue,\n            \"price\": 300\n        }\n        data.push(newProduct)\n        this.setState({\n            \"products\": data,\n            \"count\": this.state.products.length+1\n        });\n\n        //Update database\n        fetch('http://localhost:4000/products', {\n           method: 'POST',\n           body: JSON.stringify(newProduct),\n           //headers: { \"Content-Type\": \"application/json\" }\n        });\n\n    }\n\n    updateInput(evt){\n\n        let data = this.state.products;\n        this.setState({\n            \"products\": data,\n            \"inputValue\": evt.target.value\n        });\n    }\n\n    removeProduct(id){\n        let data = this.state.products\n        data = data.filter( (a) => {\n            return a.id != id;\n        });\n        this.setState( {\n            \"products\" : data\n        });\n    }\n\n\n    render() {\n        return (\n        <div>\n            <div className=\"section container\">\n                <h2>Products in Stock</h2>\n                <div style={{margin:\"10px 0\"}}> \n                    <input type=\"text\" placeholder=\"Item Name\" onChange={ evt => { this.updateInput(evt) }}/>\n                    <button type=\"button\" onClick={() => { this.addProduct() } }>Add Item</button>\n                </div>\n                <ProductsTable products={this.state.products} removeProductFunc={ (id) => this.removeProduct(id) } />\n            </div>\n\n        </div>\n        )\n    }\n\n}\n``"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;;;;;AAEA;AAAA;AACA;AADA;AAEA;AACA;;;AASA;AACA;AACA;AACA;AACA;AAHA;AAKA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAFA;AACA;AAKA;AACA;AACA;AACA;AAHA;AAMA;;;AAEA;AAEA;AACA;AACA;AACA;AAFA;AAIA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;;;AAGA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;;;;;;;;;;AAvEA;AACA;;AADA;;AACA;AACA;;AADA;AACA;AACA;AADA;AACA;;;;;;;;;;;;;;;;;;AAVA;AACA;AADA;AAiFA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}